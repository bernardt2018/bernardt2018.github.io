<html>
  <style>


  </style>

  <head>

  </head>

  <body>
    <p> testv3 </p>
    <div id="DrawdownChart">

      <div id="programmatic_dashboard_divLine" style="border: 1px solid #ccc">
        <table class="columns" style="height: 30px">
          <tr>
            <td>
              <div id="programmatic_control_divLine" style="position:absolute; right:15px; top: 0px; z-index: 20;"></div>
            </td>
          </tr>
        </table>
        <div id="programmatic_chart_divLine" style="width: 100%; height: 500px; "></div>
      </div>

    </div>

  </body>

  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
  <script type="text/javascript">


  // Load the Visualization API and the corechart package.
  google.charts.load('current', {
    'packages': ['corechart', 'controls'],
  });
// Set a callback to run when the Google Visualization API is loaded.
google.charts.setOnLoadCallback(Init2);

function Init2() {

    var DataLine = [
      ["Day", "Excess Return", "Trigger 1", "Trigger 2", "theme"],
      ["2017/04/12", 100, 150, 140, 'TPS'],
      ["2017/04/13", 110, 150, 140, 'TPS'],
      ["2017/04/14", 160, 150, 140, 'TPS'],
      ["2017/04/17", 120, 150, 140, 'TPS'],
      ["2017/04/18", 110, 150, 140, 'TPS'],
      ["2017/04/19", 131, 150, 140, 'TPS'],
      ["2017/04/20", 137, 150, 140, 'TPS'],
      ["2017/04/21", 139, 150, 140, 'TPS'],
      ["2017/04/24", 150, 150, 140, 'TPS']
    ];

    var dataLineInitial = google.visualization.arrayToDataTable(DataLine); //YTD = 0

    dataLineInitial.insertColumn(0, 'date', dataLineInitial.getColumnLabel(0));
    // copy values from column 1 (old column 0) to column 0, converted to numbers
    for (var i = 0; i < dataLineInitial.getNumberOfRows(); i++) {

      val = dataLineInitial.getValue(i, 1);
      //document.write(new Date(val));

      dataLineInitial.setValue(i, 0, new Date(val));
    }
    // remove column 1 (the old column 0)
    dataLineInitial.removeColumn(1);

    var dashboardLine = new google.visualization.Dashboard(
      document.getElementById('programmatic_dashboard_divLine'));

    var programmaticFilterLineChart = new google.visualization.ControlWrapper({
      'controlType': 'CategoryFilter',
      'containerId': 'programmatic_control_divLine',
      'options': {
        'filterColumnIndex': 4,
        'ui': {
          'labelStacking': 'vertical',
          'label': '',
          'caption': 'Select Product',
          'allowTyping': true,
          'allowMultiple': true,
          'cssClass': 'filter',
          'sortValues': 'true'
        }
      }
    });

    var chartLine = new google.visualization.ChartWrapper({
      'chartType': 'LineChart',
      'containerId': 'programmatic_chart_divLine',
      'options': {
        'pieSliceText': 'label',
        'pointSize': 8,
        'pointShape': 'square',
        'fontName': 'Gill Sans',
        'series': {
          1: {
            lineDashStyle: [2, 2],
            type: "steppedArea",
            areaOpacity: 0.15,
            enableInteractivity: false
          },
          2: {
            lineDashStyle: [2, 2],
            type: "steppedArea",
            areaOpacity: 0.15,
            enableInteractivity: false
          }
        },
        'colors': ['blue', 'orange', 'red'],
        chartArea: {
          left: 50,
          bottom: 120,
          width: "75%",
          height: "74%"
        },
        vAxis: {
          format: '#,###.00',
          baseline: 0
        },
        hAxis: {
          slantedText: false,
          slantedTextAngle: 45,
          format: 'dd MMM yyyy'
          //type: 'category'
        },
        animation: {
          duration: 1000,
          easing: 'out',
          startup: false
        },
      }
    });

    chartLine.setView({
      'columns': [0, 1, 2, 3]
    })

    dashboardLine.bind(programmaticFilterLineChart, chartLine);
    dashboardLine.draw(dataLineInitial);

    $(window).resize(function() {
      dashboardLine.draw(dataLineInitial);
    });


 // })
}


</script>

</html>

