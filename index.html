<html>
  <style>

  </style>

  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

google.charts.load('current', {
  'packages': ['corechart', 'controls']
});
google.charts.setOnLoadCallback(Init);

function Init() {

  var DataA = [
    ['Asset', 'Time', 'GBP', 'USD'],
    ['All Cap', 'MTD', -3.27, 0.5],
    ['Large Cap', 'MTD', 3.39, 0.2],
    ['Mid Cap', 'MTD', 2.71, -2],
    ['All Cap', 'YTD', -0.27, 2.5],
    ['Large Cap', 'YTD', 0.39, 2.2],
    ['Mid Cap', 'YTD', 0.71, -2.2]
  ];

  var data = google.visualization.arrayToDataTable(DataA); //YTD = 0

  var button1 = document.getElementById("b1");
  var button2 = document.getElementById("b2");
  var button3 = document.getElementById("b3");
  var buttoncolour = "#555555"

  var view = new google.visualization.DataView(data);
  view.setColumns([0, 2])
  view.setRows(data.getFilteredRows([{
    column: 1,
    value: 'MTD' // MTD is the starting filter
  }]))
  var options = {
    animation: {
      duration: 1000,
      easing: 'out',
      startup: false
    },

  };
  var chart = new google.visualization.ColumnChart(document.getElementById("programmatic_chart_div"));
  chart.draw(view, options);


  function drawChart() {
    // Disabling the button while the chart is drawing.
    button1.disabled = true;
    button2.disabled = true;
    button3.disabled = true;
    google.visualization.events.addListener(chart, 'ready',
      function() {
        button1.disabled = false;
        button2.disabled = false;
        button3.disabled = false;
      });

    chart.draw(view, options);
  }


  button1.onclick = function() {
    button1.style.background = buttoncolour
    button1.style.color = "white";
    button2.style.background = "#F5A623"
    button3.style.background = "#F5A623"
    chart.setView({
      'columns': chart.getView().columns,
      'rows': data.getFilteredRows([{
        column: 1,
        value: 'MTD'
      }])
    });
    drawChart();
    button1.disabled = true;
  };


  button2.onclick = function() {
    button2.style.background = buttoncolour
    button2.style.color = "white";
    button1.style.background = "#F5A623"
    button3.style.background = "#F5A623"
    chart.setView({
      'columns': view.columns, //gets the number of columns current used
      'rows': data.getFilteredRows([{
        column: 1,
        value: 'YTD'
      }])
    });
    drawChart();
    button2.disabled = true;
  };

  button1.style.background = buttoncolour
  button1.style.color = "white";
  button2.style.background = "#F5A623"
  button3.style.background = "#F5A623"

  chart.draw(view, options);

  var USDCheckBox = document.getElementById("USDCheck");
  var GBPCheckBox = document.getElementById("GBPCheck");
  var EURCheckBox = document.getElementById("EURCheck");
  var LCCheckBox = document.getElementById("LCCheck");

  GBPCheckBox.checked = true //by default GBP is returns

  //the function which is run if a tick box 
  function CheckWhatsTicked() {
    if (USDCheckBox.checked && GBPCheckBox.checked) {
      chart.setView({
        'columns': [0, 2, 3],
      });
    } else if (USDCheckBox.checked) {
      chart.setView({
        'columns': [0, 3],
      });

    } else {
      chart.setView({
        'columns': [0, 2],
      });

    }

    drawChart();
  }


  // runs functions if tick box is changed
  USDCheckBox.onchange = function() {

    CheckWhatsTicked()

  };

  GBPCheckBox.onchange = function() {

    CheckWhatsTicked()

  };




}



    </script>
  </head>

  <body>

    <table class="columns">
      <tr>
        <td>
          <p> Select:
            <input type="button" value="MTD" id="b1" class="button" style="margin: 0px 0px;" />
            <input type="button" value="YTD" id="b2" class="button" style="margin: 0px 0px;" />
            <input type="button" value="2017" id="b3" class="button" style="margin: 0px 0px;" />
          </p>
        </td>
        <td>

          <div style="position:absolute; right:10px; top: 2px;">

            <label class="container">USD<input type="checkbox" id="USDCheck">
            <span class="checkmark"></span>
           </label>

            <label class="container">GBP<input type="checkbox" id="GBPCheck">
            <span class="checkmark"></span>
            </label>

            <label class="container">EUR<input type="checkbox" id="EURCheck">
            <span class="checkmark"></span>
            </label>

            <label class="container">LC<input type="checkbox" id="LCCheck">
            <span class="checkmark"></span>
            </label>

          </div>
        </td>
      </tr>
    </table>
    
    <div id="programmatic_chart_div" style="width: 100%; height: 500px; "></div>

  </body>



</html>
